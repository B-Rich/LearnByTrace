var oldLineNumber;var oldSelection;window.onload=setup;function setup(){var d=document.getElementsByTagName("trace")[0];buildTraceTreeMarkup(d);var b;var c;var a=document.getElementsByClassName("collapsible");for(b=0;b<a.length;b+=1){c=a[b];c.addEventListener("click",addHighlight,true)}var f=document.getElementsByClassName("collapse-button");for(b=0;b<f.length;b+=1){c=f[b];c.addEventListener("click",collapseLevel,false)}var h=document.getElementsByClassName("expand-button");for(b=0;b<h.length;b+=1){c=h[b];c.addEventListener("click",expandLevel,false)}var e=document.getElementById("trace-container");var g=getChildByClassName(e,"collapsible");addHighlight.apply(g);expandViewportHeight()}function expandViewportHeight(){var b=document.documentElement.clientHeight;if(b>=750){var d=document.getElementById("trace-container");addStyleClass(d,"long");var a=document.getElementById("code-container");addStyleClass(a,"long");var c=document.getElementById("dataset-container");addStyleClass(c,"long")}}function expandLevel(){var b=this.parentElement.parentElement;addStyleClass(b,"hidden");var c=b.parentElement;var a=getChildByClassName(c,"expanded");removeStyleClass(a,"hidden")}function collapseLevel(){var b=this.parentElement.parentElement;addStyleClass(b,"hidden");var c=b.parentElement;var a=getChildByClassName(c,"collapsed");removeStyleClass(a,"hidden")}function addHighlight(){var a=this.attributes.lineNumber;if(a){selectCodeLine(a.nodeValue)}selectTraceLine(this)}function selectTraceLine(b){var a;var d;var c;if(oldSelection){d=getElementList(oldSelection);for(a=0;a<d.length;a+=1){c=d[a].getElementsByClassName("line")[0];removeStyleClass(c,"selected")}}d=getElementList(b);for(a=0;a<d.length;a+=1){c=d[a].getElementsByClassName("line")[0];addStyleClass(c,"selected")}oldSelection=b}function selectCodeLine(a){var b,c;if(oldLineNumber){c=document.getElementById("pseudocode_"+oldLineNumber);removeStyleClass(c,"highlighted")}b=document.getElementById("pseudocode_"+a);addStyleClass(b,"highlighted");oldLineNumber=a}var tabCounter;var createDictionaryTable,createListTable;function createCollapsibleStructure(e,p){var q=tabCounter;tabCounter+=1;var c=document.createElement("div");c.className="collapsible";var n=p.caption;if(e.hasAttributes()){var a=e.attributes.name;if(a){n+=": "+a.nodeValue}var f=e.attributes.line;if(f){n+=" (line "+f.nodeValue+")";var l=document.createAttribute("lineNumber");l.nodeValue=f.nodeValue;c.setAttributeNode(l)}}var g=document.createElement("div");if(p.expanded){g.className="expanded"}else{g.className="expanded hidden"}var b=document.createElement("div");b.className="line";var k=document.createElement("span");k.className="button collapse-button";k.tabIndex=q;var o=document.createElement("span");o.className="text";o.appendChild(document.createTextNode(n));b.appendChild(k);b.appendChild(o);g.appendChild(b);var h=document.createElement("div");h.className="collapsible-content";var d=getElementList(e);var m;var j;if(p.leaf){for(m=0;m<d.length;m+=1){j=processValueNode(d[m]);h.appendChild(j)}}else{for(m=0;m<d.length;m+=1){j=processNode(d[m]);h.appendChild(j)}}g.appendChild(h);c.appendChild(g);var i=document.createElement("div");if(p.expanded){i.className="collapsed hidden"}else{i.className="collapsed"}b=document.createElement("div");b.className="line";k=document.createElement("span");k.className="button expand-button";k.tabIndex=q;o=document.createElement("span");o.className="text";o.appendChild(document.createTextNode(n+" ..."));b.appendChild(k);b.appendChild(o);i.appendChild(b);c.appendChild(i);return c}function processNode(c){var b={algorithm_input:{caption:"Algorithm input(s)",leaf:true,expanded:true},algorithm_output:{caption:"Algorithm output(s)",leaf:true,expanded:true},parameters:{caption:"Parameter(s)",leaf:true,expanded:false},variable:{caption:"Variable update",leaf:true,expanded:false},loop_variable:{caption:"Loop variable update",leaf:true,expanded:false},trace:{caption:"Algorithm trace GO!",leaf:false,expanded:true},"function":{caption:"Function call",leaf:false,expanded:false},loop:{caption:"Loop",leaf:false,expanded:false},iteration:{caption:"Iteration",leaf:false,expanded:false},"if":{caption:"If branch taken",leaf:false,expanded:false},"else":{caption:"Else branch taken",leaf:false,expanded:false}};var a=c.tagName.toLowerCase();if(a in b){return createCollapsibleStructure(c,b[a])}}function buildTraceTreeMarkup(c){tabCounter=5;var b=document.getElementsByTagName("variable")[0];var d=processNode(c);var a=c.parentNode;a.replaceChild(d,c)}function processValueNode(treeNode){if(treeNode.tagName.toLowerCase()!="value"){return null}var valueName=treeNode.getAttribute("name");var valueText=treeNode.childNodes[0].nodeValue;var currentNode=document.createElement("span");currentNode.className="text";var textNode=document.createTextNode(valueName+": ");currentNode.appendChild(textNode);var table;if(valueText.indexOf("{")===0){var textDict;eval("textDict = "+valueText);table=createDictionaryTable(textDict);currentNode.appendChild(table)}else{if(valueText.indexOf("[")===0){var textList;eval("textList = "+valueText);table=createListTable(textList);currentNode.appendChild(table)}else{textNode=document.createTextNode(valueText);currentNode.appendChild(textNode)}}return currentNode}function createDictionaryTable(f){var e=document.createElement("table");var c=document.createElement("tr");var b=document.createElement("tr");var a=document.createElement("td");a.appendChild(document.createTextNode("key"));c.appendChild(a);a=document.createElement("td");a.appendChild(document.createTextNode("value"));b.appendChild(a);for(var d in f){a=document.createElement("td");a.appendChild(document.createTextNode(d));c.appendChild(a);a=document.createElement("td");a.appendChild(document.createTextNode(f[d]));b.appendChild(a)}e.appendChild(c);e.appendChild(b);return e}function createListTable(f){var d=document.createElement("table");var e=document.createElement("tr");var b=document.createElement("tr");var a=document.createElement("td");a.appendChild(document.createTextNode("index"));e.appendChild(a);a=document.createElement("td");a.appendChild(document.createTextNode("value"));b.appendChild(a);for(var c=0;c<f.length;c+=1){a=document.createElement("td");a.appendChild(document.createTextNode(c));e.appendChild(a);a=document.createElement("td");a.appendChild(document.createTextNode(f[c]));b.appendChild(a)}d.appendChild(b);d.appendChild(e);return d}var ELEMENT_NODE=1;var TEXT_NODE=3;function addStyleClass(b,a){b.className+=" "+a}function removeStyleClass(c,a){var b=new RegExp("\\s\\b"+a+"\\b","g");c.className=c.className.replace(b,"")}function getElementList(e){var b,d,c=[];b=e.childNodes;for(var a=0;a<b.length;a+=1){d=b[a];if(d.nodeType==ELEMENT_NODE){c.push(d)}}return c}function getChildByClassName(d,e){var c;var b=d.childNodes;for(var a=0;a<b.length;a+=1){c=b[a];if(c.nodeType==ELEMENT_NODE&&c.className.indexOf(e)!=-1){return c}}}function strip(b){var a;a=b.replace(/^\s*/g,"");a=a.replace(/\s*$/g,"");return a};